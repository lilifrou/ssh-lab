{% extends "base.html" %}

{% block content %}
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SSH Tunnel Detection - Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container my-4">

    <h2 class="mb-4">Training Metrics (Last Epoch)</h2>
    <div class="row">
        <div class="col-md-6">
            <h4>Training</h4>
            <table class="table table-bordered table-sm">
                <tbody>
                {% for key, value in train_metrics.items() %}
                <tr>
                    <th>{{ key }}</th>
                    <td>{{ value|round(4) }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-md-6">
            <h4>Validation</h4>
            <table class="table table-bordered table-sm">
                <tbody>
                {% for key, value in val_metrics.items() %}
                <tr>
                    <th>{{ key }}</th>
                    <td>{{ value|round(4) }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <hr>

    <h2 class="mt-4">Training Progress</h2>
    <div class="row">
        <div class="col-md-6">
            <h5>Accuracy</h5>
            <img src="data:image/png;base64,{{ acc_image }}" class="img-fluid rounded shadow">
        </div>
        <div class="col-md-6">
            <h5>Loss</h5>
            <img src="data:image/png;base64,{{ loss_image }}" class="img-fluid rounded shadow">
        </div>
    </div>

    {% if cm_image %}
    <hr>
    <h2 class="mt-4">Confusion Matrix</h2>
    <div class="row">
        <div class="col-md-6">
            <img src="data:image/png;base64,{{ cm_image }}" class="img-fluid rounded shadow">
        </div>
    </div>
    {% endif %}

</div>

</body>
</html>
{% endblock %}
